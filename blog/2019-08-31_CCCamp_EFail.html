<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

    <!-- Basic Page Needs
    ================================================== -->
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="author" content="Mailpile ehf">

    <!-- Mobile Specific Metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- CSS - CHANGE URL when making live
    ================================================== -->
    <link rel="stylesheet" href="/css/mailpile.css">

    <!--[if lt IE 9]>
        <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Favicons
    ================================================== -->
    <link rel="shortcut icon" href="../img/favicon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="index.rss" />

    <title>Mailpile: CCCamp19 and further EFail mitigations</title>

    <!-- JS ================================================== -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.flexnav.min.js"></script>
    <script src="/js/list.min.js"></script>
    <script src="/js/jquery.sortable.js"></script>
    <script src="/js/jquery.cookie.js"></script>
    <script src="/js/sjcl.js"></script>
    <script src="/js/hoipoi.js"></script>
    <script src="/js/site.js"></script>
    <script src="/blog/nav.js"></script>

</head><body>

    <div id="navigation">
      <div class="menu-button">Menu</div>
        <ul data-breakpoint="800" class="flexnav">
            <li><a href="/" class="scroll-link" style="position: relative;">
              <img class="scroll-hint" src="/img/icon-48x48.png"
                   style="position: absolute; top:5px; left: 10px;">
              <strong>mail</strong>pile</big>
            </a></li>
            <li><a href="/faq/" class="scroll-link">FAQ</a></li>
            <li><a href="/blog/" class="scroll-link">Blog</a></li>

            <li><a href="/download/" class="scroll-link">Download</a></li>
            <li><a href="https://community.mailpile.is/categories" class="scroll-link">Community</a></li>
            <li><a href="/donate/" class="scroll-link">Donate</a></li>
            <li class="navigation-github"><a href="https://github.com/mailpile/Mailpile" target="_blank" class="scroll-link">Github</a></li>
        </ul>
    </div>
    <a style="position: absolute; top: 0;" name="top"></a>

    <a id="github-banner" href="https://github.com/mailpile/Mailpile"><img style="position: absolute; top: 2.9em; right: 0; border: 0; z-index:4;" src="/img/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>

    <div id="content" class="container">
        <div id="header" class="clearfix">
            <div class="col-2 text-center">
                <a href="/"><img class="pages-logo" src="/img/icon-120x120.png"></a>
            </div>
            <div class="col-12">
                <h2 class="breadcrumbs"><a href="/"><strong>mail</strong>pile</a> : <a href="/blog/">blog</a></h2>
<!--            <h6>A modern, fast web-mail client with user-friendly encryption and privacy features. 100% Free and Open Source software</h6> -->
            </div>
        </div>
        <hr class="blog-hr">
        <div class="row"></div>
        <!-- Content -->
        <div id="pages" class="clearfix">
            <div class="col-11">
<!-- Page content begins -->

    <a href="/blog/2019-08-31_CCCamp_EFail.html"><h1>CCCamp19 and further EFail mitigations</h1></a>
    <p>
      <strong>Posted by <a href="#">Bjarni RÃºnar</a> on August 31, 2019</strong>
    </p>

<p>Hello world!</p>
<p>As I write this, I have mostly recovered from the amazing Chaos
Communication Camp in Germany. I attended the camp mostly as a holiday,
but there were of course quite a few Mailpile related discussions.</p>
<p>The most interesting of those related to EFail. I spent a couple of
afternoons sitting in the shade with researchers and developers who
work on OpenPGP related things. We discussed <a href="https://efail.de/">EFail</a>.</p>
<p>For those of you who haven't heard of EFail, it was one of the most
serious vulnerabilities the OpenPGP community has ever had to deal with:
by combining flaws in e-mail clients with flaws in legacy PGP (and
S/MIME) implementations, EFail described multiple ways an attacker could
turn a vulnerable e-mail client into a decryption oracle and steal the
cleartext of previously secured communications. Cryptosystem flaws don't
get much worse than that.</p>
<p>This was such a serious issue that the EFF recommended people disable
PGP entirely, at least for a little while. This triggered a rather
emotional backlash from the PGP community, and unfortunately a lot of
misinformation and misunderstandings were published. Some of which
still have not been corrected.</p>
<p>As a community, we're still coming to terms with some of the
implications. Those of us who aren't in denial (which is disturbingly
common) are still mulling over ways to secure our tools and defend
against similar flaws in the future.</p>
<p>I have written before about <a href="2018-05-14_PGP_Security_Alert.html">Mailpile and
EFail</a>: there were a few issues that
needed fixing, but overall Mailpile weathered EFail relatively well.
Exfiltrating cleartext from Mailpile was possible, but it was not fully
automated and required social engineering.</p>
<p>The social engineering aspects are still quite serious, and some are
easier to exploit than others. The most trivial EFail exploit is to
send someone a message they're likely to reply to, with the ciphertext
you want to exfiltrate appended to the end after a long boring
boilerplate signature or quoted message. If the mail client decrypts,
and the recipient replies without reading and pruning their response...
hey presto, you've exfiltratrated the secret message.</p>
<p>One of the outcomes of these discussions at camp, were some concrete
recommendations on how Mailpile could make such social engineering less
likely to succeed. The guiding principle I ended up with, was:</p>
<blockquote>
<p>If the user is probably not going to see the content, do not decrypt.</p>
</blockquote>
<p>On the plane home from Germany, I implemented this strategy. So for the
first time, Mailpile will deliberately decline to decrypt parts of
incoming e-mail, if the message structure is such that it might might
provide cover for EFail social engineering attacks.</p>
<p>The change wasn't huge, but the security impact is significant. We
welcome any and all feedback: <a href="https://github.com/mailpile/Mailpile/commit/79551b17928a9f990ac5e1336386caab8b183323">the code is here</a>.
This patch is already in <a href="/download/linux.html">the nightly packages</a>
and will hit the release branch next time I update it - which should be
soon, we've got quite a few important fixes queued up by now.</p>
<p>Many thanks to <a href="https://sebastian-schinzel.de/">Sebastian</a> and
<a href="https://twitter.com/valodim">Vincent</a> for helping me figure out how to
improve Mailpile on this front. And thanks to <a href="https://www.ccc.de/">CCC</a>
for providing venues for these conversations to take place.</p>
<p>Please feel free to <a href="https://community.mailpile.is/t/blog-post-about-cccamp-19-and-efail/243">discuss this post in our Community
Forum</a>.</p>
<!-- Page content ends -->
<!--
                <p><script id='fbwj89d'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=mailpile&button=compact&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fbwj89d');</script></p>
-->
            </div>
            <div class="col-1"></div>
            <div class="col-4"></div>
        </div>
        <div class='blog-nav'>
          <hr class='above'>
          <p class='prev'></p><p class='next'></p>
          <hr class='below'>
        </div>
        <!-- Contact & Media -->
        <div id="footer" class="clearfix">
            <div class="one-third">
                <h3>Please Donate</h3>
                <p>To ensure ongoing development of Mailpile and our community!
                   <a href="/thank-you/">Thank you!</a></p>
                <p><a href="/donate/" target="_blank"><img src="/img/donate-button.png" style="width: 60%;"></a></p>
            </div>
            <div class="one-third">
                <h3>Contact Us</h3>
                <ul class="add-bottom">
                    <li>Email: <a href="mailto:team@mailpile.is">team@mailpile.is</a></li>
                    <li>PGP Key: <a href="/files/team@mailpile.is.asc" title="Full fingerprint:
CB48 4157 EC53 EEE5 3C13
69C3 C572 8DA5 2242 5313">... C572 8DA5 2242 5313</a>
                    </a></li>
                </ul>
                <ul>
                    <li>Twitter: <a href="https://twitter.com/mailpileteam" target="_blank">@MailpileTeam</a></li>
                    <li>Freenode: <a href="irc://irc.freenode.net/#mailpile">#mailpile</a> (IRC)</li>
                    <li>Discourse: <a href="https://community.mailpile.is/categories" target="_blank">community.mailpile.is</a></li>
                    <li>Tor: <a href="http://clgs64523yi2bkhz.onion/">clgs64523yi2bkhz.onion</a></li>
                </ul>
                <ul>
                    <li><a href="/privacy.html">Privacy &amp; Information Policy</a></li>
                </ul>
            </div>
            <div class="one-third">
                <h3>Resources</h3>
                <ul class="add-bottom">
                    <li>Code: <a href="https://github.com/mailpile/Mailpile" target="_blank">Github</a></li>
                    <li>Bugs: <a href="https://github.com/mailpile/Mailpile/issues" target="_blank">Browse</a>,
                              <a href="https://github.com/mailpile/Mailpile/issues/new" target="_blank">Report</a></li>
                    <li>Wiki: <a href="https://github.com/mailpile/Mailpile/wiki" target="_blank">Read &amp; Write</a></li>
                    <li>Support: <a href="https://community.mailpile.is/c/support" target="_blank">Community</a></li>
                </ul>
                <ul>
                    <li>Logo: <a href="/img/mailpile-logo.svg" target="_blank">SVG</a>,
                              <a href="/img/mailpile-logo.png" target="_blank">PNG</a></li>
                    <li>Font: <a href="https://github.com/mailpile/fonts" target="_blank">Mailpile "the font"</a></li>
                </ul>
            </div>
        </div>

        <div class="add-top add-bottom"></div>


    </div><!-- container -->
    <div class="scroll-hint" style="position: fixed; right: 20px; bottom: 20px; width: 30px;">
      <a href="#top"><img alt="top" src="/img/arrow-up.png"></a>
    </div>

  <p style="display: none;">
    Please do not send mail to
    <a href="mailto:aardvark@mailpile.is?subject=Ants">aardvark@mailpile.is</a>
  </p>
</body>
</html>